{% extends 'users/base.html' %}
{% load i18n %}

{% block content %}

    <div class="row">
        <div class="columns large-12">

            <h2>{% trans "Users" %} ({{object_list.count}})</h2>

                <table class="users">
                    {% for u in object_list %}

                          {% ifchanged u.forms_filled %}
                            {% if forloop.counter0 %}
                              </table>
                              <table class="users">
                             {% endif %}
                          {% endifchanged %}
                        <tr>
                            <td class="uname">
                                <a href="{% url "user_dashboard" u.id %}">
                                    #{{u.id}}: {{u}}
                                </a>
                            </td>
                            <td class="uanswers">
                                {{u.forms_filled}}
                            </td>
                            <td>
                                {{u.last_form_filled|default:'---'}}
                            </td>

                            {% for ordinal, uc in u.all_cohorts.items  %}
                              <td>{{ordinal}}: {{uc.get_status_display}}</td>
                            {% endfor %}

                            <td>
                                {{u.get_gender_display}}
                            </td>

                        </tr>

                    {% endfor %}
                </table>
        </div>
    </div>

{% endblock %}
